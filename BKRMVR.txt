(async () => {
  const delay = ms => new Promise(r => setTimeout(r, ms));
  
  const unbookmarkSelector = '[data-testid="removeBookmark"]';
  
  let removed = 0;
  let noButtonsFound = 0;
  const maxAttempts = 50; // Safety limit to prevent infinite loops
  
  console.log('Starting bookmark removal...');
  
  for (let i = 0; i < maxAttempts; i++) {
    const unbookmarkButtons = document.querySelectorAll(unbookmarkSelector);
    
    if (unbookmarkButtons.length === 0) {
      noButtonsFound++;
      
      if (noButtonsFound >= 2) {
        console.log('No more bookmarks found. Done!');
        break;
      }
      
      console.log('Scrolling to load more bookmarks...');
      window.scrollTo(0, document.body.scrollHeight);
      await delay(1500);
      continue;
    }
    
    noButtonsFound = 0;
    
    unbookmarkButtons[0].click();
    removed++;
    console.log(`✓ Removed bookmark #${removed}`);
    
    await delay(800);
    
    window.scrollBy(0, 300);
    await delay(400);
  }
  
  console.log(`\n✓ Finished! Total bookmarks removed: ${removed}`);

})();
